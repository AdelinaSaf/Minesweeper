# Minesweeper - Сетевая игра "Сапёр"
Minesweeper Helper - это многопользовательская сетевая версия классической игры "Сапёр", реализованная на Java. Проект поддерживает одновременную игру двух игроков на одном игровом поле с системой рейтинга и сохранением результатов.

## Основные возможности
### Игровые функции:
Сетевая игра 2x2 - два игрока играют на одном поле

Классические правила "Сапёра":

Открытие клеток левой кнопкой мыши

Установка флажков правой кнопкой мыши

Автоматическое открытие соседних клеток при клике на "0"

Система рейтинга - начисление очков за победы и ничьи

Сохранение прогресса - результаты сохраняются в файл

### Сетевая архитектура:
Клиент-серверная модель

Синхронизация состояния в реальном времени

Автоматическое определение победителя

Обработка отключений игроков

## Структура проекта
```text
src/main/java/org/example/
├── client/                    # Клиентская часть
│   ├── Client.java           # Основной клиент
│   ├── ClientStart.java      # Точка входа клиента
│   ├── GameUI.java          # Графический интерфейс игры
│   ├── RatingUI.java        # Окно рейтинга
│   └── StartPanel.java      # Стартовое окно
├── server/                   # Серверная часть
│   ├── MineSweeperServer.java # Основной сервер
│   └── ClientHandler.java   # Обработчик клиентов
├── model/                    # Модели данных
│   ├── Bomb.java            # Логика бомб
│   ├── Flag.java            # Логика флагов
│   ├── Game.java            # Основная игра
│   ├── Matrix.java          # Матрица поля
│   └── Ranges.java          # Работа с координатами
├── enums/                    # Перечисления
│   ├── Box.java             # Типы клеток
│   └── GameState.java       # Состояния игры
└── utils/                   # Вспомогательные классы
    ├── Coord.java           # Координаты
    └── Protocol.java        # Сетевой протокол
```
## Требования
Java 20 или выше

Maven для сборки

Lombok (уже включен в зависимости)

## Установка и запуск
1. Сборка проекта:
bash
mvn clean compile
2. Запуск сервера:
bash
mvn exec:java -Dexec.mainClass="org.example.server.MineSweeperServer"
3. Запуск клиента:
bash
mvn exec:java -Dexec.mainClass="org.example.client.ClientStart"
## Протокол обмена данными
### Основные команды:
JOIN:PlayerName - подключение игрока

WAITING - ожидание второго игрока

GAME_STARTED - игра началась

WINNER:PlayerName - объявление победителя

DRAW - ничья

OPPONENT_WIN - победа при отключении соперника

### Клики мыши:
Left:x,y - левый клик

Right:x,y - правый клик

### Система рейтинга
Очки начисляются следующим образом:

Победа: +200 очков

Ничья: +100 очков каждому

Поражение: 0 очков

Отключение соперника: +200 очков оставшемуся игроку

Рейтинги сохраняются в файл ratings.txt в формате:

```text
имя_игрока1:очки
имя_игрока2:очки
```

## Особенности реализации
### Сервер:
Поддерживает до 2 игроков одновременно

Автоматическая генерация игрового поля

Синхронизация состояния между клиентами

Обработка отключений и восстановление игры

### Клиент:
Графический интерфейс на Swing

Отображение игрового поля с разными состояниями клеток

Индикация текущего состояния игры

Возможность просмотра рейтинга

### Безопасность:
Проверка корректности ходов

Обработка сетевых ошибок

Защита от некорректных данных

## Игровой процесс
Запуск клиента и ввод имени игрока

Подключение к серверу (ожидание второго игрока)

Совместная игра на одном поле:

Игроки по очереди делают ходы

Состояние поля синхронизируется

Побеждает игрок, который не подорвался на бомбе

Начисление очков и обновление рейтинга

Возможность начать новую игру

## Добавление новой функциональности:
Изменение размера поля: модифицировать MineSweeperServer.java

Добавление новых команд: расширить Protocol.java

Изменение графики: обновить GameUI.java

## Отладка:
Логирование на уровне java.util.logging

Визуализация состояния игры в консоли

Возможность тестирования в локальной сети
